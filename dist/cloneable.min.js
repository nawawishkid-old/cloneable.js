parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r},p.cache={};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({"xYyu":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=function(){function t(){e(this,t),this.events={}}return n(t,[{key:"on",value:function(e){var t;this.eventExists(e)||(this.events[e]=[]);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(t=this.events[e]).push.apply(t,r),this}},{key:"emit",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return this.eventExists(e)&&this.events[e].forEach(function(e){return e.call.apply(e,[t].concat(r))}),this}},{key:"eventExists",value:function(e){return void 0!==this.events[e]}}]),t}(),i=r;exports.default=i;
},{}],"7LJ9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./EventEmitter"));function e(t){return t&&t.__esModule?t:{default:t}}function n(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){r(t,e,n[e])})}return t}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}var u=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.eventEmitter=new t.default,this.initialState=n,this.state=n}return o(e,[{key:"on",value:function(){var t;return(t=this.eventEmitter).on.apply(t,arguments),this}},{key:"setState",value:function(t){return this.eventEmitter.emit("beforeStateChange"),this.state=n({},this.state,t),this.eventEmitter.emit("afterStateChange"),this}},{key:"reset",value:function(){return this.state=this.initialState,this}}]),e}(),s=u;exports.default=s;
},{"./EventEmitter":"xYyu"}],"l1Jr":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e(this,t),this._data=n}return n(t,[{key:"get",value:function(e,t){var n=this._dotNotationResolver(e);return void 0===n?t:n}},{key:"set",value:function(e,t){return this._data[e]=t,this}},{key:"_dotNotationResolver",value:function(e){return e.split(".").reduce(function(e,t){return e[t]},this._data)}}]),t}(),o=r;exports.default=o;
},{}],"rNwc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("./EventEmitter")),e=o(require("./StateController")),n=o(require("./OptionController"));function o(t){return t&&t.__esModule?t:{default:t}}function r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){i(t,e,n[e])})}return t}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t){return u(t)||s(t)||a()}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function s(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function u(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function d(t,e,n){return e&&h(t.prototype,e),n&&h(t,n),t}var f=function(){function o(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(m(this,o),void 0===e)throw new Error("Cloneable container must be defined");if(null===e)throw new Error("Cloneable container must not be null");var i=e.constructor.name.slice(0,3);if("SVG"!==i&&"HTM"!==i)throw new TypeError("Cloneable container must be a direct or inherited instance of HTMLElement or SVGElement class");if(null===r||r.constructor!==Object){var a=null===r?"null":c(r);throw new TypeError("Options parameter must be object, "+a+" given.")}this.container=e,this._iniOptionController(r),this._initStateController(),this.eventEmitter=new t.default,this.middlewares=this.optionController.get("middlewares");var s=this.optionController.get("events");Object.keys(s).forEach(function(t){return n.on.apply(n,[t].concat(l(s[t])))})}return d(o,[{key:"middleware",value:function(){var t;return(t=this.middlewares).push.apply(t,arguments),this}},{key:"on",value:function(){var t;return(t=this.eventEmitter).on.apply(t,arguments),this}},{key:"init",value:function(){var t=this;return this.cloneButton=this._getCloneButton(),this._handleCustomRemoveButton(),this._initControllersElement(),this._initTrayElement(),this._initContainerElement(),this.stateController.on("afterStateChange",function(){t.eventEmitter.emit("afterStateChange",t),t.cloneButton.disabled=t._getState().clonedAmount===t._getState().maxCloneable}),this.stateController.on("beforeStateChange",function(){t.eventEmitter.emit("beforeStateChange",t)}),this.eventEmitter.emit("load",this),this}},{key:"isCloneable",value:function(){return this._getState().clonedAmount<this._getState().maxCloneable}},{key:"_iniOptionController",value:function(t){var e=this.container.dataset,o=e.max,i=e.append;this.optionController=new n.default(r({maxCloneable:parseInt(o)||1/0,isAppend:"false"!==i,cloneButton:null,removeButton:null,middlewares:[],events:{}},t))}},{key:"_initStateController",value:function(){var t=this.optionController.get("maxCloneable");this.stateController=new e.default({maxCloneable:t,cloneableAmount:t,clonedAmount:0,clonedElements:[],isAppend:this.optionController.get("isAppend")})}},{key:"_initControllersElement",value:function(){this.controllers=this._createElement("div",{className:this._getConstant("CONTROLLERS_ELEMENT_CLASSNAME")}),this.controllers.appendChild(this.cloneButton)}},{key:"_initTrayElement",value:function(){var t=this._createElement("div",{className:this._getConstant("TRAY_ELEMENT_CLASSNAME")});t.style.marginBottom="1em",this.tray=t}},{key:"_initContainerElement",value:function(){this.target=this.container.firstElementChild,this.tray.appendChild(this.target),this.container.appendChild(this.tray),this.container.appendChild(this.controllers)}},{key:"clone",value:function(){if(this.isCloneable()){this.eventEmitter.emit("beforeClone",this);var t=this._createClonedElementWrapper(),e=this.target.cloneNode(!0),n=this._getRemoveButton(),o=this._getState().isAppend?"appendChild":"insertBefore";t.appendChild(e),t.appendChild(n),this.tray[o](t,this.tray.firstElementChild);var r=this._applyMiddlewares(e),i=this._getState(),a=i.clonedAmount,s=i.cloneableAmount,u=i.clonedElements;return this.stateController.setState({clonedAmount:a+1,cloneableAmount:s-1,clonedElements:[].concat(l(u),[r])}),this.eventEmitter.emit("afterClone",this),this}this.eventEmitter.emit("uncloneable",this)}},{key:"removeClonedElement",value:function(t){var e=this.tray.querySelector('[data-cloned-id="'.concat(t,'"]'));this.tray.removeChild(e),this.stateController.setState({clonedAmount:this._getState().clonedAmount-1,cloneableAmount:this._getState().cloneableAmount+1,clonedElements:l(this.tray.querySelectorAll("[data-cloned-id]"))})}},{key:"_getCloneButton",value:function(){var t=this,e=this.optionController.get("cloneButton")||this._findCustomButton("clone"),n=e||this._createElement("button",{className:this._getConstant("CLONE_BUTTON_CLASSNAME"),textContent:"Clone"});return n.addEventListener("click",function(){t.eventEmitter.emit("cloneButtonClick",t),t.clone()}),n}},{key:"_getRemoveButton",value:function(){var t=this,e=this.removeButtonTemplate?this.removeButtonTemplate.cloneNode(!0):this._createElement("button",{className:this._getConstant("REMOVE_BUTTON_CLASSNAME"),textContent:"Remove"});return e.addEventListener("click",function(e){t.eventEmitter.emit("removeButtonClick",t),t.removeClonedElement(e.target.parentElement.dataset.clonedId)}),e}},{key:"_applyMiddlewares",value:function(t){var e=this,n=t.constructor;return this.middlewares.reduce(function(t,o){var r=o.call(e,t,e._getState().clonedAmount+1);if(void 0===r||r.constructor!==n)throw new TypeError("Middleware must return the cloned element");return r},t)}},{key:"_handleCustomRemoveButton",value:function(){var t=this.optionController.get("removeButton")||this._findCustomButton("remove");t&&(this.removeButtonTemplate=t.cloneNode(!0),t.parentElement&&t.parentElement.removeChild(t))}},{key:"_createClonedElementWrapper",value:function(){var t=this._createElement("div",this._getConstant("CLONED_ELEMENT_CLASSNAME"));return t.dataset.clonedId=this._getState().clonedAmount+1,t}},{key:"_findCustomButton",value:function(t){return this.container.querySelector("[data-cloneable-".concat(t,"-btn]"))}},{key:"_createElement",value:function(t,e){var n=document.createElement(t);return Object.keys(e).forEach(function(t){return n[t]=e[t]}),n}},{key:"_getState",value:function(){return this.stateController.state}},{key:"_getConstant",value:function(t){return this.constructor.constants[t]}},{key:"clonedElements",get:function(){return this._getState().clonedElements}}]),o}();f.constants=Object.freeze({CLONE_BUTTON_CLASSNAME:"clone-btn",REMOVE_BUTTON_CLASSNAME:"remove-btn",TRAY_ELEMENT_CLASSNAME:"tray",CLONED_ELEMENT_CLASSNAME:"cloned",CONTROLLERS_ELEMENT_CLASSNAME:"controllers"});var v=f;exports.default=v;
},{"./EventEmitter":"xYyu","./StateController":"7LJ9","./OptionController":"l1Jr"}],"79Wc":[function(require,module,exports) {
"use strict";var e=l(require("./Cloneable"));function l(e){return e&&e.__esModule?e:{default:e}}window.Cloneable=e.default;
},{"./Cloneable":"rNwc"}]},{},["79Wc"], null)
//# sourceMappingURL=/cloneable.min.map